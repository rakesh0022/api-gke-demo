swagger: "2.0"
info:
  title: "demo-api-gateway"
  version: "1.0.0"

# 1. Define the API Key mechanism
securityDefinitions:
  api_key:
    type: apiKey
    name: key # API key will be passed as a query param 'key'
    in: query

paths:
  /hello:
    get:
      operationId: "getHello"
      x-google-backend:
        # FQDN of your existing Global LB
        address: "https://136.110.180.171.nip.io/hello"
        protocol: "h2" # FIXED: Corrected to 'h2'
      responses:
        '200':
          description: "Success"
      # 2. Apply the API Key requirement to this specific operation
      security:
        - api_key: []
